<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verify 6 Digit Code</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <style>
    body {
      background-color: #2c3e50; /* Dark background color */
      color: #ecf0f1; /* Light text color */
    }

    .navbar {
      background-color: #3498db; /* Blue navbar color */
    }

    .navbar img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    .container {
      margin-top: 50px;
    }

    .verification-boxes {
      display: flex;
      justify-content: center;
      margin-top: 30px;
    }

    .verification-box {
      width: 60px; /* Increased box size */
      height: 60px; /* Increased box size */
      text-align: center;
      margin: 0 10px;
      font-size: 24px; /* Increased font size */
      border: 2px solid #3498db; /* Blue border */
      border-radius: 10px; /* Rounded corners */
      background-color: #34495e; /* Dark box background color */
      color: #ecf0f1; /* Light text color */
    }

    .verify-button {
      margin-top: 30px;
    }

    .btn-primary {
      background-color: #3498db; /* Blue button color */
      border: 2px solid #3498db; /* Blue button border */
      padding: 15px 40px; /* Increased padding */
      font-size: 28px; /* Increased font size */
    }

    .btn-primary:hover {
      background-color: #2980b9; /* Darker blue on hover */
      border: 2px solid #2980b9; /* Darker blue border on hover */
    }

    .title {
      font-size: 48px; /* Larger title font size */
      font-weight: bold; /* Bold title */
    }

    .paragraph {
      font-size: 22px; /* Larger paragraph font size */
      font-style: italic; /* Italic paragraph */
    }
  </style>
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand">
      <img src="drone.png" alt="Logo" height="40">
    </a>
  </nav>

  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h2 class="text-center title">Enter 6-Digit Code From Controller App</h2>
        <h2 class="text-center paragraph">Get ready for an epic drone simulator!</h2>

        <!-- Verification Boxes -->
        <div class="verification-boxes">
          <!-- Change the 'maxlength' attribute based on your requirement -->
          <input type="text" class="form-control verification-box" id="verficationInput1" maxlength="1">
          <input type="text" class="form-control verification-box" id="verficationInput2" maxlength="1">
          <input type="text" class="form-control verification-box" id="verficationInput3" maxlength="1">
          <input type="text" class="form-control verification-box" id="verficationInput4" maxlength="1">
          <input type="text" class="form-control verification-box" id="verficationInput5" maxlength="1">
          <input type="text" class="form-control verification-box" id="verficationInput6" maxlength="1">
        </div>

        <!-- Verify Button -->
        <div class="text-center verify-button">
          <button type="button" class="btn btn-primary" id="verifyButton">Verify</button>
        </div>
      </div>
    </div>
    <h2 class="text-center paragraph" id="verificationMessage"></h2>
  </div>
  <script>
    document.getElementById('verifyButton').addEventListener('click', function () {
      const verificationCode1 = document.getElementById('verificationInput1').value;
      const verificationCode2 = document.getElementById('verificationInput2').value;
      const verificationCode3 = document.getElementById('verificationInput3').value;
      const verificationCode4 = document.getElementById('verificationInput4').value;
      const verificationCode5 = document.getElementById('verificationInput5').value;
      const verificationCode6 = document.getElementById('verificationInput6').value;

      const verificationCode = verificationCode1 + verificationCode2 + verificationCode3 + verificationCode4 + verificationCode5 + verificationCode6;

        fetch('/verify', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ code: verificationCode })
        })
            .then(response => response.json())
            .then(data => {
                displayVerificationMessage(data.message);

                if (data.message === 'Code is valid!') {
                    const socketURL = `wss://idrone-controller.onrender.com/code/socket/${verificationCode}`;
                    sessionStorage.setItem('socketURL', socketURL);
                    window.location.href = '/simulator';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                displayVerificationMessage('Error verifying the code.');
            });
    });

    function displayVerificationMessage(message) {
        var verificationMessage = document.getElementById('verificationMessage');
        verificationMessage.textContent = message;
    }
</script>
  <!-- Bootstrap JS and Popper.js -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
</body>

</html>
